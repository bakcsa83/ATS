\hypertarget{_a_t_s_8c}{}\section{src/\+A\+TS.c File Reference}
\label{_a_t_s_8c}\index{src/\+A\+T\+S.\+c@{src/\+A\+T\+S.\+c}}
{\ttfamily \#include \char`\"{}A\+T\+S.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_a_t_s_8c_a9c5c457c53b098f54ed76f3cad099ea4}{ats\+\_\+init} (void($\ast$report\+\_\+error\+\_\+)(uint8\+\_\+t error\+\_\+code), void($\ast$report\+\_\+task\+\_\+invocation\+\_\+)(\hyperlink{structats__task}{ats\+\_\+task} task))
\item 
static \hyperlink{structats__task}{ats\+\_\+task} $\ast$ \hyperlink{_a_t_s_8c_ac369e7bcc0bee1cc0060ebc194cf3158}{calculate\+\_\+rank} ()
\item 
static uint8\+\_\+t \hyperlink{_a_t_s_8c_ab5ea6e32a9cc64810884cc08f8f83699}{sqr} (uint8\+\_\+t base)
\item 
void \hyperlink{_a_t_s_8c_a5263a07fbf7a99103d0e2d0a7089c042}{ats\+\_\+reset} ()
\item 
\hyperlink{_a_t_s_8h_a965a1ebfda4c1a827a8197208f1d5460}{ats\+\_\+result} \hyperlink{_a_t_s_8c_affc87fe559506e035a59f63bff3ff9ba}{ats\+\_\+get\+\_\+free\+\_\+task\+\_\+slot} (\hyperlink{structats__task}{ats\+\_\+task} $\ast$$\ast$task)
\item 
void \hyperlink{_a_t_s_8c_abc71e15acb8dadced5a4a49ba13bc598}{ats\+\_\+release\+\_\+task\+\_\+slot} (\hyperlink{structats__task}{ats\+\_\+task} $\ast$task)
\item 
void \hyperlink{_a_t_s_8c_ac60de65cfea1086409a754f072b411f0}{ats\+\_\+systick} ()
\item 
void \hyperlink{_a_t_s_8c_ae55d7fd9fe38b98c660eba107d4a8ac6}{ats\+\_\+start} ()
\item 
void \hyperlink{_a_t_s_8c_a875ada52d2eb3162e17839ac11397136}{ats\+\_\+stop} ()
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{structats__task}{ats\+\_\+task} \hyperlink{_a_t_s_8c_ab6c4046c61d605da4617e8692723fc22}{tasks} \mbox{[}\hyperlink{ats__config_8h_aac747bed84189f8cfa509b94d488e622}{M\+A\+X\+\_\+\+T\+A\+S\+KS}\mbox{]}
\item 
static volatile uint8\+\_\+t \hyperlink{_a_t_s_8c_a0ca7691f0758cc2c8b3a0b3167547076}{is\+\_\+running}
\item 
void($\ast$ \hyperlink{_a_t_s_8c_a00da768edc35a4993cd054dd7937b6fa}{report\+\_\+error} )(uint8\+\_\+t error\+\_\+code)
\begin{DoxyCompactList}\small\item\em 0 means A\+TS is not running. 1 means A\+TS is running \end{DoxyCompactList}\item 
void($\ast$ \hyperlink{_a_t_s_8c_ac26b71d644fc3c0d47d43b18abe4b83e}{report\+\_\+task\+\_\+invocation} )(\hyperlink{structats__task}{ats\+\_\+task})
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyAuthor}{Author}
Zoltan Bakcsa (\href{mailto:zoltan@bakcsa.hu}{\tt zoltan@bakcsa.\+hu})
\end{DoxyAuthor}
A\+TS main source file. It contains most of the implementation \begin{DoxyCopyright}{Copyright}
\href{https://www.gnu.org/licenses/gpl-3.0-standalone.html}{\tt https\+://www.\+gnu.\+org/licenses/gpl-\/3.\+0-\/standalone.\+html} 
\end{DoxyCopyright}


\subsection{Function Documentation}
\mbox{\Hypertarget{_a_t_s_8c_affc87fe559506e035a59f63bff3ff9ba}\label{_a_t_s_8c_affc87fe559506e035a59f63bff3ff9ba}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!ats\+\_\+get\+\_\+free\+\_\+task\+\_\+slot@{ats\+\_\+get\+\_\+free\+\_\+task\+\_\+slot}}
\index{ats\+\_\+get\+\_\+free\+\_\+task\+\_\+slot@{ats\+\_\+get\+\_\+free\+\_\+task\+\_\+slot}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{ats\+\_\+get\+\_\+free\+\_\+task\+\_\+slot()}{ats\_get\_free\_task\_slot()}}
{\footnotesize\ttfamily \hyperlink{_a_t_s_8h_a965a1ebfda4c1a827a8197208f1d5460}{ats\+\_\+result} ats\+\_\+get\+\_\+free\+\_\+task\+\_\+slot (\begin{DoxyParamCaption}\item[{\hyperlink{structats__task}{ats\+\_\+task} $\ast$$\ast$}]{task }\end{DoxyParamCaption})}

\mbox{\Hypertarget{_a_t_s_8c_a9c5c457c53b098f54ed76f3cad099ea4}\label{_a_t_s_8c_a9c5c457c53b098f54ed76f3cad099ea4}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!ats\+\_\+init@{ats\+\_\+init}}
\index{ats\+\_\+init@{ats\+\_\+init}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{ats\+\_\+init()}{ats\_init()}}
{\footnotesize\ttfamily void ats\+\_\+init (\begin{DoxyParamCaption}\item[{void($\ast$)(uint8\+\_\+t error\+\_\+code)}]{report\+\_\+error\+\_\+,  }\item[{void($\ast$)(\hyperlink{structats__task}{ats\+\_\+task} task)}]{report\+\_\+task\+\_\+invocation\+\_\+ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{_a_t_s_8c_abc71e15acb8dadced5a4a49ba13bc598}\label{_a_t_s_8c_abc71e15acb8dadced5a4a49ba13bc598}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!ats\+\_\+release\+\_\+task\+\_\+slot@{ats\+\_\+release\+\_\+task\+\_\+slot}}
\index{ats\+\_\+release\+\_\+task\+\_\+slot@{ats\+\_\+release\+\_\+task\+\_\+slot}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{ats\+\_\+release\+\_\+task\+\_\+slot()}{ats\_release\_task\_slot()}}
{\footnotesize\ttfamily void ats\+\_\+release\+\_\+task\+\_\+slot (\begin{DoxyParamCaption}\item[{\hyperlink{structats__task}{ats\+\_\+task} $\ast$}]{task }\end{DoxyParamCaption})}

\mbox{\Hypertarget{_a_t_s_8c_a5263a07fbf7a99103d0e2d0a7089c042}\label{_a_t_s_8c_a5263a07fbf7a99103d0e2d0a7089c042}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!ats\+\_\+reset@{ats\+\_\+reset}}
\index{ats\+\_\+reset@{ats\+\_\+reset}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{ats\+\_\+reset()}{ats\_reset()}}
{\footnotesize\ttfamily void ats\+\_\+reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Resets all internal variables to 0, drops all tasks. \mbox{\Hypertarget{_a_t_s_8c_ae55d7fd9fe38b98c660eba107d4a8ac6}\label{_a_t_s_8c_ae55d7fd9fe38b98c660eba107d4a8ac6}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!ats\+\_\+start@{ats\+\_\+start}}
\index{ats\+\_\+start@{ats\+\_\+start}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{ats\+\_\+start()}{ats\_start()}}
{\footnotesize\ttfamily void ats\+\_\+start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{_a_t_s_8c_a875ada52d2eb3162e17839ac11397136}\label{_a_t_s_8c_a875ada52d2eb3162e17839ac11397136}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!ats\+\_\+stop@{ats\+\_\+stop}}
\index{ats\+\_\+stop@{ats\+\_\+stop}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{ats\+\_\+stop()}{ats\_stop()}}
{\footnotesize\ttfamily void ats\+\_\+stop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{_a_t_s_8c_ac60de65cfea1086409a754f072b411f0}\label{_a_t_s_8c_ac60de65cfea1086409a754f072b411f0}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!ats\+\_\+systick@{ats\+\_\+systick}}
\index{ats\+\_\+systick@{ats\+\_\+systick}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{ats\+\_\+systick()}{ats\_systick()}}
{\footnotesize\ttfamily void ats\+\_\+systick (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{_a_t_s_8c_ac369e7bcc0bee1cc0060ebc194cf3158}\label{_a_t_s_8c_ac369e7bcc0bee1cc0060ebc194cf3158}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!calculate\+\_\+rank@{calculate\+\_\+rank}}
\index{calculate\+\_\+rank@{calculate\+\_\+rank}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{calculate\+\_\+rank()}{calculate\_rank()}}
{\footnotesize\ttfamily static \hyperlink{structats__task}{ats\+\_\+task} $\ast$ calculate\+\_\+rank (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Internal function that calculates task ranks and returns the task with the highest rank. \mbox{\Hypertarget{_a_t_s_8c_ab5ea6e32a9cc64810884cc08f8f83699}\label{_a_t_s_8c_ab5ea6e32a9cc64810884cc08f8f83699}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!sqr@{sqr}}
\index{sqr@{sqr}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{sqr()}{sqr()}}
{\footnotesize\ttfamily static uint8\+\_\+t sqr (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{base }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Calculates square. Base should not be greater than 3. (Max value of ats\+\_\+task\+\_\+status) 

\subsection{Variable Documentation}
\mbox{\Hypertarget{_a_t_s_8c_a0ca7691f0758cc2c8b3a0b3167547076}\label{_a_t_s_8c_a0ca7691f0758cc2c8b3a0b3167547076}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!is\+\_\+running@{is\+\_\+running}}
\index{is\+\_\+running@{is\+\_\+running}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{is\+\_\+running}{is\_running}}
{\footnotesize\ttfamily volatile uint8\+\_\+t is\+\_\+running\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{_a_t_s_8c_a00da768edc35a4993cd054dd7937b6fa}\label{_a_t_s_8c_a00da768edc35a4993cd054dd7937b6fa}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!report\+\_\+error@{report\+\_\+error}}
\index{report\+\_\+error@{report\+\_\+error}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{report\+\_\+error}{report\_error}}
{\footnotesize\ttfamily void($\ast$ report\+\_\+error) (uint8\+\_\+t error\+\_\+code)}



0 means A\+TS is not running. 1 means A\+TS is running 

\mbox{\Hypertarget{_a_t_s_8c_ac26b71d644fc3c0d47d43b18abe4b83e}\label{_a_t_s_8c_ac26b71d644fc3c0d47d43b18abe4b83e}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!report\+\_\+task\+\_\+invocation@{report\+\_\+task\+\_\+invocation}}
\index{report\+\_\+task\+\_\+invocation@{report\+\_\+task\+\_\+invocation}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{report\+\_\+task\+\_\+invocation}{report\_task\_invocation}}
{\footnotesize\ttfamily void($\ast$ report\+\_\+task\+\_\+invocation) (\hyperlink{structats__task}{ats\+\_\+task})}

\mbox{\Hypertarget{_a_t_s_8c_ab6c4046c61d605da4617e8692723fc22}\label{_a_t_s_8c_ab6c4046c61d605da4617e8692723fc22}} 
\index{A\+T\+S.\+c@{A\+T\+S.\+c}!tasks@{tasks}}
\index{tasks@{tasks}!A\+T\+S.\+c@{A\+T\+S.\+c}}
\subsubsection{\texorpdfstring{tasks}{tasks}}
{\footnotesize\ttfamily \hyperlink{structats__task}{ats\+\_\+task} tasks\mbox{[}\hyperlink{ats__config_8h_aac747bed84189f8cfa509b94d488e622}{M\+A\+X\+\_\+\+T\+A\+S\+KS}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

